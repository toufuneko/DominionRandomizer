//ランダマイザ―カードリスト

//帝国
var Teikoku = {
  "ExtensionName":"帝国",
  "Cards": [
    {
      "Name":["生贄"],
      "Cost":[4]
    },
    {
      "Name":["石", "投石機"],
      "Cost":[4,2]
    },
    {
      "Name":["ヴィラ"],
      "Cost":[4]
    },
    {
      "Name":["パトリキ","エンポリウム"],
      "Cost": [2,5]
    },
    {
      "Name":["王室の鍛冶屋"],
      "Cost": [-8]
    },
    {
      "Name":["お守り"],
      "Cost":5
    },
    {
      "Name":["女魔術師"],
      "Cost":[3]
    },
    {
      "Name":["開拓者", "騒がしい村"],
      "Cost": [2,5]
    },
    {
      "Name":["冠"],
      "Cost": [5]
    },
    {
      "Name":["技術者"],
      "Cost":[-4]
    },
    {
      "Name":["軍団兵"],
      "Cost":[5]
    },
    {
      "Name":["剣闘士", "大金"],
      "Cost":[3, [8, -8]]
    },
    {
      "Name":["公共広場"],
      "Cost":[5]
    },
    {
      "Name":["市街"],
      "Cost":[-8]
    },
    {
      "Name":["資料庫"],
      "Cost":[5]
    },
    {
      "Name":["城"],
      "Cost":[3]
    },
    {
      "Name":["陣地", "鹵獲品"],
      "Cost":[2,5]
    },
    {
      "Name":["神殿"],
      "Cost":[4]
    },
    {
      "Name":["戦車競走"],
      "Cost":[3]
    },
    {
      "Name":["大君主"],
      "Cost":[-8]
    },
    {
      "Name":["庭師"],
      "Cost":[5]
    },
    {
      "Name":["農家の市場"],
      "Cost":[3]
    },
    {
      "Name":["元手"],
      "Cost":[5]
    },
    {
      "Name":["ワイルドハント"],
      "Cost":[5]
    },
  ]
};
//暗黒時代
var Ankoku = {
  "ExtensionName":"暗黒時代",
  "Cards": [
    {
      "Name":["祭壇"],
      "Cost":[6]
    },
    {
      "Name":["武器庫"],
      "Cost":[4]
    },
    {
      "Name":["はみだし者"],
      "Cost":[5]
    },
    {
      "Name":["山賊の宿営地"],
      "Cost":[5]
    },
    {
      "Name":["物乞い"],
      "Cost":[2]
    },
    {
      "Name":["地下墓所"],
      "Cost":[5]
    },
    {
      "Name":["伯爵"],
      "Cost":[5]
    },
    {
      "Name":["狂信者"],
      "Cost":[5]
    },
    {
      "Name":["死の荷車"],
      "Cost":[4]
    },
    {
      "Name":["採取者"],
      "Cost":[3]
    },
    {
      "Name":["城塞"],
      "Cost":[4]
    },
    {
      "Name":["墓暴き"],
      "Cost":[5]
    },
    {
      "Name":["隠遁者"],
      "Cost":[3]
    },
    {
      "Name":["狩場"],
      "Cost":[6]
    },
    {
      "Name":["金物商"],
      "Cost":[4]
    },
    {
      "Name":["屑屋"],
      "Cost":[5]
    },
    {
      "Name":["襲撃者"],
      "Cost":[4]
    },
    {
      "Name":["青空市場"],
      "Cost":[3]
    },
    {
      "Name":["秘術師"],
      "Cost":[5]
    },
    {
      "Name":["略奪"],
      "Cost":[5]
    },
    {
      "Name":["救貧院"],
      "Cost":[1]
    },
    {
      "Name":["行進"],
      "Cost":[4]
    },
    {
      "Name":["建て直し"],
      "Cost":[5]
    },
    {
      "Name":["盗賊"],
      "Cost":[5]
    },
    {
      "Name":["賢者"],
      "Cost":[3]
    },
    {
      "Name":["ゴミあさり"],
      "Cost":[4]
    },
    {
      "Name":["従者"],
      "Cost":[2]
    },
    {
      "Name":["物置"],
      "Cost":[3]
    },
    {
      "Name":["浮浪児"],
      "Cost":[3]
    },
    {
      "Name":["浮浪者"],
      "Cost":[2]
    },
    {
      "Name":["吟遊詩人"],
      "Cost":[4]
    },
    {
      "Name":["偽造通貨"],
      "Cost":[5]
    },
    {
      "Name":["封土"],
      "Cost":[4]
    },
    {
      "Name":["ネズミ"],
      "Cost":[4]
    },
    {
      "Name":["騎士"],
      "Cost":[5]
    }
  ]
};
//繁栄
var Hanei = {
  "ExtensionName":"繁栄",
  "Cards": [
    {
      "Name":["銀行"],
      "Cost":[7]
    },
    {
      "Name":["司教"],
      "Cost":[4]
    },
    {
      "Name":["都市"],
      "Cost":[5]
    },
    {
      "Name":["禁制品"],
      "Cost":[5]
    },
    {
      "Name":["会計所"],
      "Cost":[5]
    },
    {
      "Name":["拡張"],
      "Cost":[7]
    },
    {
      "Name":["鍛造"],
      "Cost":[7]
    },
    {
      "Name":["ならず者"],
      "Cost":[6]
    },
    {
      "Name":["大市場"],
      "Cost":[6]
    },
    {
      "Name":["隠し財宝"],
      "Cost":[6]
    },
    {
      "Name":["宮廷"],
      "Cost":[7]
    },
    {
      "Name":["借金"],
      "Cost":[3]
    },
    {
      "Name":["造幣所"],
      "Cost":[5]
    },
    {
      "Name":["記念碑"],
      "Cost":[4]
    },
    {
      "Name":["香具師"],
      "Cost":[5]
    },
    {
      "Name":["行商人"],
      "Cost":[8]
    },
    {
      "Name":["石切り場"],
      "Cost":[4]
    },
    {
      "Name":["大衆"],
      "Cost":[5]
    },
    {
      "Name":["玉璽"],
      "Cost":[5]
    },
    {
      "Name":["護符"],
      "Cost":[4]
    },
    {
      "Name":["交易路"],
      "Cost":[3]
    },
    {
      "Name":["保管庫"],
      "Cost":[5]
    },
    {
      "Name":["投機"],
      "Cost":[5]
    },
    {
      "Name":["望楼"],
      "Cost":[3]
    },
    {
      "Name":["労働者の村"],
      "Cost":[4]
    },
  ]
};
//基本 第二版
var Kihon2 = {
  "ExtensionName":"基本2nd",
  "Cards": [
    {
      "Name":["地下貯蔵庫"],
      "Cost":[2]
    },
    {
      "Name":["礼拝堂"],
      "Cost":[2]
    },
    {
      "Name":["堀"],
      "Cost":[2]
    },
    {
      "Name":["家臣"],
      "Cost":[3]
    },
    {
      "Name":["工房"],
      "Cost":[3]
    },

    {
      "Name":["商人"],
      "Cost":[3]
    },
    {
      "Name":["前駆者"],
      "Cost":[3]
    },
    {
      "Name":["村"],
      "Cost":[3]
    },
    {
      "Name":["改築"],
      "Cost":[4]
    },
    {
      "Name":["鍛冶屋"],
      "Cost":[4]
    },
    {
      "Name":["金貸し"],
      "Cost":[4]
    },
    {
      "Name":["玉座の間"],
      "Cost":[4]
    },
    {
      "Name":["密猟者"],
      "Cost":[4]
    },
    {
      "Name":["民兵"],
      "Cost":[4]
    },

    {
      "Name":["役人"],
      "Cost":[4]
    },

    {
      "Name":["庭園"],
      "Cost":[4]
    },
    {
      "Name":["市場"],
      "Cost":[5]
    },
    {
      "Name":["衛兵"],
      "Cost":[5]
    },

    {
      "Name":["議事堂"],
      "Cost":[5]
    },
    {
      "Name":["研究所"],
      "Cost":[5]
    },
    {
      "Name":["鉱山"],
      "Cost":[5]
    },

    {
      "Name":["祝祭"],
      "Cost":[5]
    },
    {
      "Name":["書庫"],
      "Cost":[5]
    },

    {
      "Name":["山賊"],
      "Cost":[5]
    },
    {
      "Name":["魔女"],
      "Cost":[5]
    },
    {
      "Name":["職人"],
      "Cost":[6]
    },
  ]
};
//陰謀
var Inbou = {
  "ExtensionName":"陰謀",
  "Cards": [
    {
      "Name":["手先"],
      "Cost":[2]
    },
    {
      "Name":["中庭"],
      "Cost":[2]
    },
    {
      "Name":["秘密の部屋"],
      "Cost":[2]
    },
    {
      "Name":["仮面舞踏会"],
      "Cost":[3]
    },
    {
      "Name":["執事"],
      "Cost":[3]
    },
    {
      "Name":["願いの井戸"],
      "Cost":[3]
    },
    {
      "Name":["貧民街"],
      "Cost":[3]
    },
    {
      "Name":["詐欺師"],
      "Cost":[3]
    },
    {
      "Name":["大広間"],
      "Cost":[3]
    },
    {
      "Name":["共謀者"],
      "Cost":[4]
    },
    {
      "Name":["鉱山の村"],
      "Cost":[4]
    },
    {
      "Name":["男爵"],
      "Cost":[4]
    },
    {
      "Name":["偵察員"],
      "Cost":[4]
    },
    {
      "Name":["鉄工所"],
      "Cost":[4]
    },
    {
      "Name":["銅細工師"],
      "Cost":[4]
    },
    {
      "Name":["橋"],
      "Cost":[4]
    },
    {
      "Name":["改良"],
      "Cost":[5]
    },
    {
      "Name":["交易場"],
      "Cost":[5]
    },
    {
      "Name":["貢物"],
      "Cost":[5]
    },
    {
      "Name":["拷問人"],
      "Cost":[5]
    },
    {
      "Name":["寵臣"],
      "Cost":[5]
    },
    {
      "Name":["破壊工作員"],
      "Cost":[5]
    },
    {
      "Name":["公爵"],
      "Cost":[5]
    },
    {
      "Name":["貴族"],
      "Cost":[6]
    },
    {
      "Name":["ハーレム"],
      "Cost":[6]
    },
  ]
};
//カードリスト終了
var ExtensionList = {Kihon2:Kihon2, Inbou:Inbou, Ankoku:Ankoku, Hanei:Hanei, Teikoku:Teikoku};
document.addEventListener('DOMContentLoaded', function() {
  document.getElementById('btn').addEventListener('click', function() {
    var SelectExtensions = [];
    var selectCards = [];
    var extensions = document.getElementsByName('SelectExtension');

    for (var i = 0, len = extensions.length; i < len; i++){
      var extension = extensions.item(i);
      if (extension.checked) {
        SelectExtensions.push(extension.value)}
    }
    for (var i = 0, len = SelectExtensions.length; i < len; i++){
          for (var j = 0, len2 = ExtensionList[SelectExtensions[i]].Cards.length; j < len2; j++){
            selectCards.push([ExtensionList[SelectExtensions[i]].Cards[j].Name, ExtensionList[SelectExtensions[i]].Cards[j].Cost, ExtensionList[SelectExtensions[i]].ExtensionName]);
          }
      }
      console.log(selectCards.length);
      var cardCount = selectCards.length;
      var pickupIndex = [];
      while(pickupIndex.length <= 9){
        var ints = Math.floor(Math.random()*cardCount);
        console.log(ints);
        if (pickupIndex.indexOf(ints) == -1){
          pickupIndex.push(ints);
        }
      }
      pickupIndex.sort(function(i,j){
        if( i > j ) return -1;
        if( i < j ) return 1;
        return 0;
      });
      console.log(pickupIndex);
      var lineindex = 1
        for (var i of pickupIndex){
        var str = selectCards[i][0].toString();
        var Cost = selectCards[i][1].toString();
        var Extension = selectCards[i][2];
        console.log(str);
        str = str.replace(",", " / ");
        Cost = Cost.replace(",", " / ");
        Extension = Extension.replace("2nd", "<sub>2nd</sub>")
        if (lineindex%2) {
          result.insertAdjacentHTML('afterend', "<h2><div class='columns col-gapless text-large'><div class='column col-1 bg-secondary'></div><div class='column col-6 bg-secondary'>"+ str + "</div><div class='column col-2 bg-secondary text-center'>" + Cost + "</div><div class='column col-2 bg-secondary text-center'>" + Extension + "</div><div class='column col-1 bg-secondary'></div></div></h2>");
        }
        else{
          result.insertAdjacentHTML('afterend', "<h2><div class='columns col-gapless text-large'><div class='column col-1 bg-gray'></div><div class='column col-6 bg-gray'>"+ str + "</div><div class='column col-2 bg-gray text-center'>" + Cost + "</div><div class='column col-2 bg-gray text-center'>" + Extension + "</div><div class='column col-1 bg-gray'></div></div></h2>");
        }
        lineindex++
      }
      result.insertAdjacentHTML('afterend', "<h2><div class='columns col-gapless'><div class='column col-1 bg-primary'></div><div class='column col-6 bg-primary text-light'>カード</div><div class='column col-2 bg-primary text-light text-center'>コスト</div><div class='column col-2 bg-primary text-light text-center'>拡張セット</div><div class='column col-1 bg-primary'></div></div></h2>" );
  }, false);
}, false);
